---
import DeckCard from "./DeckCard.astro";
import Gallery from "./GalleryWithDescription.astro";
import GalleryWithoutDescription from "./Gallery.astro"
const { 
  deckContainerClass, 
  cardHoverStyle,
  description = true,
  id,
  gallery,
  deckImages=[0, 2],
  link,
  currentLink,
  closeLink
} = Astro.props


const images = gallery.map(slide => (
  {src: slide.src, alt: slide.caption}
)).slice(...deckImages).reverse()

const deckCardId = 'deck-' + id

---

<DeckCard
  images={images}
  class={deckContainerClass}
  cardHoverStyle={cardHoverStyle}
  id={deckCardId}
  target={id}
  link={link}
/>

{description && (
  <Gallery
    id={id}
    gallery={gallery}
    currentLink={currentLink}
    link={link}
    closeLink={closeLink}
  />
)}

{!description && (
  <GalleryWithoutDescription
    id={id}
    gallery={gallery}
    currentLink={currentLink}
    link={link}
    closeLink={closeLink}
  />
)}